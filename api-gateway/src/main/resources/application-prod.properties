server.port=${PORT:8080}
spring.application.name=api-gateway

# Eureka
eureka.client.service-url.defaultZone=${EUREKA_URL:http://localhost:8761/eureka/}
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=${RENDER_EXTERNAL_HOSTNAME:localhost}

# Gateway Routes - Use direct URLs if Eureka has issues on cloud
spring.cloud.gateway.routes[0].id=identity-service
spring.cloud.gateway.routes[0].uri=${IDENTITY_SERVICE_URL:lb://identity-service}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/identity/**

spring.cloud.gateway.routes[1].id=academic-service
spring.cloud.gateway.routes[1].uri=${ACADEMIC_SERVICE_URL:lb://academic-service}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/academic/**
spring.cloud.gateway.routes[1].filters[0]=JwtAuthenticationFilter

spring.cloud.gateway.routes[2].id=grading-service
spring.cloud.gateway.routes[2].uri=${GRADING_SERVICE_URL:lb://grading-service}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/grading/**
spring.cloud.gateway.routes[2].filters[0]=JwtAuthenticationFilter

# CORS - Update with actual frontend domain
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=${CORS_ORIGINS:*}
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*

# Logging
logging.level.root=INFO
